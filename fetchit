#!/usr/bin/perl
# FetchIt
use strict;
use Data::Dumper;
use WWW::Mechanize;

my $m = WWW::Mechanize->new;
my $url = shift or die;

$m->get($url) or print $m->status;
$m->quiet(1);

sub fetchImages {
  foreach my $img($m->links) {
    if($img->url_abs =~ /.+\.(jpg|png)$/) {
      my $filename = time.".$1";
      $m->follow_link(url =>  $img->url);
      $m->save_content($filename);
      $m->back;
    }
  }
}

&fetchImages;
